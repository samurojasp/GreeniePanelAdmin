<div class="table-responsive">
  <div *ngIf="isLate">
    <c-card class="mb-4" color="warning">
      <c-card-body class="card-body">
        <h5 class="card-text">
          {{ message }}
        </h5></c-card-body
      >
    </c-card>
  </div>
  <table class="table table-striped align-middle mb-0 border custom-table">
    <thead class="text-nowrap text-truncate">
      <tr>
        <th
          class="text-center"
          [ngStyle]="{ 'background-color': headers[0].color }"
        >
          Unidades involucradas/programas-actividades-competencia
        </th>
        <ng-container *ngFor="let category of categories; let i = index">
          <th
            class="text-center"
            [ngStyle]="{ 'background-color': headers[i + 1].color }"
          >
            {{ category.name }}
          </th>
        </ng-container>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let matrix of matrix">
        <td class="text-start border-cell">{{ matrix.departmentName }}</td>
        <td
          class="text-center border-cell"
          *ngFor="let category of categories; let i = index"
        >
          <ng-container *ngIf="matrix.categories[i].quantity > 0">
            <p
              (click)="
                navigateToContributions(
                  matrix.categories[i].id,
                  category.indicator.id
                )
              "
              style="cursor: pointer"
            >
              <svg
                cIcon
                name="cil-check"
                size="lg"
                [ngStyle]="{ color: headers[i + 1].color }"
              ></svg>
              {{ matrix.categories[i].quantity }}
            </p>
          </ng-container>
          <ng-container
            *ngIf="
              category.id === matrix.categories[i].id &&
              matrix.categories[i].potencially
            "
          >
            <c-spinner
              [ngStyle]="{ color: headers[i + 1].color }"
              variant="grow"
            ></c-spinner>
          </ng-container>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<c-toaster [placement]="position" class="p-3" position="fixed">
  <c-toast
    (timer)="onTimerChange($event)"
    (visibleChange)="onVisibleChange($event)"
    [visible]="visible"
    [class]="toastClass"
  >
    <c-toast-body>
      <p>{{ toastMessage }}</p>
      <c-progress thin>
        <c-progress-bar [value]="percentage"></c-progress-bar>
      </c-progress>
    </c-toast-body>
  </c-toast>
</c-toaster>
